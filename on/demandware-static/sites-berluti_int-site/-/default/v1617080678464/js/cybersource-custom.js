$(document).ready(function(){var e;$("#generic-form-submit").on("submit",function(e){return!!$(this).validate().form()}),$("body").hasClass("cyb_alipayintermediate")&&setTimeout(function(){document.RedirectForm.submit()},1e3),$("body").hasClass("cyb_testfingerprintRedirect")&&(e=document.getElementById("URl_redirect").value,setTimeout(function(){location.href=e},1e3)),$("div").hasClass("payerauth")&&document.PAInfoForm.submit(),$("body").hasClass("cyb_payerauthenticationredirect")&&document.RedirectForm.submit(),$("body").hasClass("cyb_unitTest_payerauth")&&document.RedirectForm.submit(),$("div").hasClass("cyb_unitTest_payerauthsubmit")&&document.PAInfoForm.submit(),$("body").hasClass("cyb_sa_redirect")&&(e=document.getElementById("redirect_url_sa").value,window.top.location.replace(e)),$("div").hasClass("SecureAcceptance_IFRAME")&&(e=document.getElementById("sa_iframeURL").value,$(".SecureAcceptance_IFRAME").append("<iframe src="+e+'  name="hss_iframe"  width="78%" height="630px" scrolling="no" />')),$("body").hasClass("sa_iframe_request_form")&&document.form_iframe.submit(),$("body").hasClass("cyb_sa_request_form")&&document.ePayment.submit(),$("#entry-mode-pos_unittest select.input-select").change(function(){"swiped"==this.value?$("#card-section, #sample-card-section").css("display","none"):"keyed"==this.value&&$("#card-section, #sample-card-section").css("display","block")});var a,r,t,i=!1;function n(e){return!$(".checkout-billing").validate().form()?e.disable():e.enable()}var o,c,l={env:"sandbox",commit:!0,payment:function(){var e=Urls.paypalinitsession;return i=!!(0<$("#paypal-credit-container").length&&$("#paypal-credit-container").is(":visible")),t=document.getElementById("billingAgreementCheckbox"),(r=null!=t&&t.checked)?e+="?billingAgreement=true":i&&(e+="?isPayPalCredit=true"),paypal.request.post(e).then(function(e){return a=e.requestID,e.processorTransactionID})},onAuthorize:function(e,t){var e={requestId:a,billingAgreementFlag:r,paymentID:e.paymentID,payerID:e.payerID,isPayPalCredit:i},n=$('<form action="'+Urls.paypalcallback+'" method="post"><input type="hidden" name="requestId" value="'+a+'" /><input type="hidden" name="billingAgreementFlag" value="'+r+'" /><input type="hidden" name="paymentID" value="'+e.paymentID+'" /><input type="hidden" name="payerID" value="'+e.payerID+'" /><input type="hidden" name="isPayPalCredit" value="'+i+'" /></form>');$("body").append(n),n.submit()},validate:function(e){0<$(".checkout-billing").length&&(n(e),$(".checkout-billing").on("change",function(){n(e)}))}};SitePreferences.ISPAYPALENABLED&&0<$(".paypal-button-container-mini").length&&paypal.Button.render(l,".paypal-button-container-mini"),SitePreferences.ISPAYPALENABLED&&0<$(".paypal-button-container-cart1").length&&paypal.Button.render(l,".paypal-button-container-cart1"),SitePreferences.ISPAYPALENABLED&&0<$(".paypal-button-container-cart2").length&&paypal.Button.render(l,".paypal-button-container-cart2"),SitePreferences.ISPAYPALENABLED&&0<$("#paypal-button-container").length&&paypal.Button.render(l,"#paypal-button-container"),SitePreferences.ISPAYPALENABLED&&0<$("#paypal-credit-container").length&&(l.style={label:"credit",size:"small",shape:"rect"},paypal.Button.render(l,"#paypal-credit-container")),$(".billingAgreementExpressCheckout").click(function(e){e.preventDefault();var t=$('<form action="'+Urls.paypalcallback+'" method="post"></form>');$("body").append(t),t.submit()}),0<$("#processorToken").length&&(o=$("#processorToken").val(),(c={}).client_token=o,Klarna.Credit.init(c),Klarna.Credit.load({container:"#klarna_container"},function(e){1==e.show_form&&(document.getElementById("auth_button").innerHTML='<br><button id="klarnaPayButton" type="button" name="buy">Pay</button>',$("#klarnaPayButton").click(function(){authorizeKlarnaOrder()}))}),window.authorizeKlarnaOrder=function(){$.ajax({method:"POST",url:Urls.klarnaupdate,success:function(e){var t,n,a;e.submit?Klarna.Credit.authorize(function(e){1==e.approved?(document.getElementById("klarnaAuthToken").value=e.authorization_token,$('.submit-order button[type="submit"]').trigger("click")):1==e.show_form?$("#klarnaPayButton").show():$("#klarnaPayButton").hide()}):($("#klarnaPayButton").hide(),t=document.getElementById("errormsg"),0<(n=document.getElementsByClassName("error-form")).length?n[0].innerText=Resources.DECLINED_ERROR:((a=document.createElement("div")).className="error-form",a.innerText=Resources.DECLINED_ERROR,t.appendChild(a)))},error:function(e){$("#klarnaPayButton").hide();var t,n=document.getElementById("errormsg"),a=document.getElementsByClassName("error-form");0<a.length?a[0].innerText=Resources.TECHINAL_ERROR:((t=document.createElement("div")).className="error-form",t.innerText=Resources.TECHINAL_ERROR,n.appendChild(t))}})})});